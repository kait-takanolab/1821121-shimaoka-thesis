# 学習環境について
目標：
- 論理的思考力を育む
    - 論理的思考とは，「思考や論証の組み立て，思考の妥当性が保証される法則や形式」に則って思考を組み立てることとする．
- 直観的に理解のしやすいブロックプログラミングにより、プログラミングの論理的思考を身に着けられるシステム
- スマホなどで、通学・通勤時などの隙間時間にふれられる価値
- ブロックプログラミングからコードへの変換、プログラミング言語あるいは構文への理解を深められるシステムを提案
- 穴埋め問題などを利用し、よりプログラミング言語にユーザが慣れていける環境を提案

1. 問題文とブロックプログラミングから、プログラミングに触れる
- 問題となる文章に合わせて、ブロックを動かしてみて、システムの動きをみる（既存のシステムが多く存在する）

2. ブロックからコードに変換されることで、実際に自分のプログラムはどのように書くのか、構文に触れる
- プレイグラウンドのように、例となるコードをブロックを組み合わせてどのようにすれば作れるのか学ぶ
- 問題となる文章に合わせて、ブロックを動かしてみて、システムの動きをみる（完成したあとにコードをみるものはありそう、未リサーチ）

3. プログラミング言語の穴埋め問題
- プログラムの穴埋めをするシステムは存在
- 穴埋めになっている問題文がだされた時に、ブロックプログラミングをどうやってからめる？

1. ブロックプログラミングになれる
2. プログラミング言語の雰囲気になれる
3. プログラミング言語になれる
4. プログラミング言語がかける

#
春からこれまでの方向性について、それはそもそも既存研究では無いの？
どういった部分は自分の力でつくれた？
研究の方法を書けるのが大事
論文の３章をしっかりかけるようにしたい
実装したものを提案システムなどのslideでかく

課題からなぜ穴埋めになったのか間となる文章がない
穴埋めにかんして関連研究などをあげて、文章を補完
重要な機能を挙げて置いてシステム設計
方法論の部分を　穴埋めなどでしぼるのはいいからがんばる

まなばせかた


- 小さなシステムでも細かく説明することが方法の説明
- 言葉の説明
- 場面の想定への説明
- 値を決定せず、パラメータでよい部分はパラメータにする
- 実験の際などに実装する部分はする

memo:
word2vec, svd, fpga microsoft,

# 更新
## 10/04
nodeのスライドはインストール方法など

評価基準を制定する
卒論にかける構成にする

問題をDBから読みとる
穴埋め問題を管理または自動生成

課題を明確にしたい


## 10/07
- タブスイッチのidを変更した（Taba,b,c　→　Question_area, output, test)
- 以前まで利用していたtextareaを破棄し、タブ切替できるDivを利用（コメントアウトしているだけ）
- iframeのテストをした、他のhtmlファイルの内容をそのまま流用できる（programm/index2.htmlのタブの中のtest参照）
- 一部Javascriptの中で、必要な関数がtextareaからDivに変更されたことでかわった。
    - value, innerHTML などを利用していた箇所が innerText に変更される箇所がある
    - まだすべてを置換していない
- Javascriptのコードを生成した際にエスケープ文字が代入されている問題を解決した
    - エスケープ文字自体は生成されてしまうので、コード生成後に置換することにした
    - もしかしたらもっと置換しなければいけないかもしれないため、要検証
- ブロックを触ると自動でoutputのコードが切り替わるようにした、現在はJavascript
- 現時点でのGUIについて
    - 画面左側にBlocklyを直接触るための箇所
    - 画面右側に問題文、Blockからの結果、テスト
    - 基本的には問題文と結果を切り替える？
- 実はスタートブロックとして用意してたif文などをワークスペースの選択肢として用意をしわすれてたことに気づいた
- 早めに用意する


## 10/10
- Logic項目を用意し、Ifの利用が可能になった。
- If-elseはIfブロックを設置後、IFブロック内の歯車マークから選択ができる

- タブのQuestion, outputなどの範囲指定が雑に四角を作成しているだけのため、コードが伸びると枠からずれる

- Questionとtestが同時に選択、変更されるように変更した
    - 現在はローカル環境のファイルを選択してもらう形式→選択肢から選んでもらう形式に
    - 現時点で問題文となるxmlの書かれているtextファイルと生後判断のテストが用意されているhtmlファイルを同時に選べるようにしたい
    - ファイルの位置を同じフォルダに用意？
    - htmlファイルはiframeにて読み込めるが、textファイルの読み込みがなんでかうまくいかない
        試行：window.open, close
    - 複数記事を読んだ感じ、基本的にローカルに存在するHTMLファイルの動作によりファイルを読み込むことはセキュリティ面もあり制約が多い
    - file自体はローカルから読み取り、その内容からHTMLファイルは別でiframeの方式にすればいい？
        - questionjsに追記する形でiframe?
    - input からローカルファイルを選択し、Questionの欄にtest.txt, testの欄にtest.htmlを読み取ることができるようになった
    これによって、問題文となるtxtファイルとhtmlファイルの名前を統一して保存すれば、同時に切り替えられるようになった

- 問題を複数用意する

## 10/11　semi
- 論理的思考を身に着けるということであれば正誤だけでなく解説があるといいかなと思います。
- 似た関数をリスト
    - If else  while
    - Word2vecで似たような言葉
    - 似たような数字
- ある程度決め打ちでもいい
- forが正答だから似たようなもの

## 10/12
- 決められたワードから自動で選択肢を生成したい
- 配列を複数用意して、ワードがマッチした場合に配列を読み取ろうと思う
    - {(for,while,do),(if,else,which),(print,alert)}

- 問題文から単語を切り取って、マッチしたら問題として生成？
- x = x.split(/(\s|\(|\)|\;|\n)/);
- の様に正規表現を用いると、スペース,（,）,;,改行で文章を区切ることができる
- （）を正規表現を囲むように置くことで区切った文章も配列にいれることができる

- x.split()の様に内容を含まないと、一つの文字列として表現できる
    - はずだが、Uncaught TypeError: x.split is not　a functionと表示される場合があった
    - エラーが表示される箇所の変数を明示的にStringだと指定すると動作する -> String(x)
    - 一つの文字列にはなったが、区切り文字だった”,”が残ったままになる
- x.join(,) などは？
    - おなじく一つの文字列にはなるが、”,”も残る
- replase とかで消してみる？
    - x = (String(x)).replace(/,/g, '');
    - このようにすると”,”は消せた
- そもそも前提とする文章に”,"が存在する場合のことは現在一切考慮していない・・・
- 元の文章を保存しておいて、どうにかできる？ わからない

- そもそもこの方法だと問題となる選択肢が増えると値が膨大になるかも
- forループを現時点で３回回すことが確定している

## 10/16 - 17
### 10/12日の文字列について
- split前の文章を保存しておくには、普通に変数をわければいい

- 文章内に選択肢をいれるならやっぱりわけたりもどした物を使いたい？
- 文字列から配列にしているが、そこにどうやってセレクトボックスをいれるのかわからない


### dynamicname.htmlを作成
- 動的に変数を設定する際のメモであり、auto matchにてセレクトボックスなどを複数用意したいと思った
- 内容としては、連想配列を用いている

### auto match　
- 連想配列からforEachを用いるとエラーが発生した
- 関係あるかはわからない
    - Javascriptの連想配列は順序を持っていない？
    - 今回は関係なかった
- 連想配列にいれる時のキーとなる数字が間違っていただけだったため今後注意する

- 複数のマッチしたワードから連想配列として配列を持つことはできた
- ここからやりたいこと
    - 複数のセレクトボックスの設定
        - セレクトボックスを複数配置すること自体はループするだけでもできる
        - セレクトボックスの名称を設定したい どこをいじるか
    - セレクトボックスの位置をキーワードがマッチした場所に設定
        - マッチした場所をdivに書き換える
        - 元のワードも保存しておく
    - appendの実行順序を意識しないとうごかない

- テキストボックスを作成することはできた
    - テキストボックスの個数を調べる
    - テキストボックスの選択された値を調べる
    - 正誤判定
- 全部できたらメインのプログラムに組み込むことを考える
    - 現時点ではhtml本文から問題を生成した
    - Blocklyから生成された文章を読み取って、そこから実行したい
    - questionjsを変更する
        - questionjs2, answer2　test.jsに作成

- JSの実行を３通りできるようにする（Question, output, test)
- 表示のためにエスケープ文字を消していたために、実行時にエラーを吐く
- エスケープ文字が表示される状態にもどした
- Question, outputに関しては実行できる
- testはできていない
    - br などHTML表示するためにつけているものも変えなきゃだめかもしれない
    - testに関して、セレクトボックスの情報をどうにか選択されている文字にしたい
    - どの部分がセレクトボックスなのかを判別して文章から配列に区切ることは可能
        - ただし、配列の何番目がセレクトボックスなのか判別できない
    - セレクトボックスの選択されているテキストを読み込むことはできる
    - どのセレクトボックスを読んでいて、配列の何番目に挿入するのかを調べたい
    - sele[n]の番号順が、単語のヒット順ではあるが、正確にはマッチパターンのstr[i][j]にヒットしたものから順にnが決定するのが問題
    - sortなどためした
- できた

- 文字のインデントもいつかなおしたい

## 10/19- 
- [x] 新しくhtmlファイル作成 -> index3.html
    - [x] ブロックからxmlでの表示
    - [x] textファイルへ保存

- [x] インデントをいい感じにしたい
    - [x] 文字列を行ごとに読み込む
        - 改行コードで区切っている
    - [x] *{*,*}*の位置を読み取る
        - array.indexOf() を利用するとなぜかブラウザがクラッシュ
        - array.includes() を利用することで代用
    - [x] 半角空白４つ分挿入
        - HTMLにおける半角スペース　&nbsp;
        - HTMLに表示する関係上、ただ空白があってもスルーされる
    - [x] 改行コードを最後にたしてあげる
- [x] 実装したい 
    - [x] index2.html
    - [x] question_area
    - [x] output
    - [x] test
        - HTMLにて半角スペースを実装するためのワードを読み取ってしまい、JS実行時にエラーになる
        - replaceにて実装


## 10/26-
- [x] 卒論のひな形をつくる
- [x] ppを書き換える
- [x] node.jsでサーバとして動くと面白い

## -10/31
- node.jsによるサーバでの実装

## 11/01
- [ ] indexに書いているxml文を他の場所に書いて動くようにしたい
    - [ ] 命令文
    - [ ] 初期ブロック
[ ] キーワードを配置している場所がJavascriptのファイルに直書きなので、どこか別の場所を考えたい
[ ] 現在指定しているキーワードがかなり少ないので増やす
[x] mongoDBのインストールとSetup（ノートPC）
[ ] DBと連携して問題を生成する方法を考えていない（MongoDB）
[ ] まずは問題の解答だけDBに保存するなど作成したい
[ ] もし連携する場合、どういった情報をDBに保存するのか
[ ] 問題の解答
[ ] 問題の選択肢
[ ] 解説があるとうれしいらしい、なんらかの形を考えたい
[ ] 問題にたいして、正解となるブロックを表示できるようにしたい
[ ] タブの枠のサイズなどが適正でないので調整する
[ ] 問題文を表示したい

[ ] サーバで動かしているため、それを活かしたい
Javascriptではファイルを扱いづらい→サーバで動くと利用できそう
- xmlのデータを別でかく
DBとの連携
- NoSQLとの連携がよさそう
- MongoDBがよくNode.jsと利用されているみたい

## 1101semi
どのように実験していくか
研究内容は
・インターフェイス
・ユーザビリティ　
・機能を作って評価
・穴埋め箇所の場所や選択肢の内容は適切？
""" 構文としては正しいけど、意図していない場合など評価できるか """
・実行結果が一致する
Word2vec　関数名など学習しているモデル

斎藤さん
「提案する学習環境について」というスライドがありましたが、これは図化しておくと尚更理解を深めやすくなって良いと思います。また、「ステップ1では○○を行い～」等という感じで、学習工程があるという事が分かるように書いておくと良いと思います。
(他の方から頂いた質問からヒントを得たと思いますが、島岡さんが仰っていた「1つの問題に対して1～3の事を順に行う」という事が分かるように表現を工夫しておくととても良くなると思います。)
- 学習工程の既定
- 図化

## 11/18
- [x] 構文としての正しさの評価
    - 構文上の正しさとは？
        - コードを実行できる
        - エラーが発生しない
- [ ] 問題の意図との整合性の評価
    - 整合性の評価の仕方
        - 問題に応じて評価するポイントを事前に設定しておく
        - そのポイントに対して自動でテストを行うとよい？
        - 例えば数字を扱う問題を出す場合には、規定の数字や、範囲外の数字が入力された際の実行結果
        - 関数などを実行する場合に実行結果

## 11/19
構文としての正しさの評価
1. 
eval の代わりに実行として new　Functionを用いて実行をしたいと考えた
Functionではローカルのスコープの変数にアクセスできず、グローバルな変数のみを利用しての実行になり、
evalでは実行できていたものが実行できない場合が存在している
2. 
構文上の正しさを評価するにあたって、コードを実際に実行してみることが一番はやいと考えた。
実行した後に、エラーが発生しなければコードは構文上正しいコードである
3. 
index.htmlとしているもののタブを増やす
ブロックとコード
実行
4. 
コードが空白の場合にgoodになる
別に間違ってはないからいい？

整合性の評価
1. 

## 問題を一つは用意したい
1. 文字列を表示する
2. 条件分岐を使う
3. 繰り返しを使う
4. 変数を利用する

### 問題（素数）
100までの数字の中で、素数を表示しなさい。
ここで素数とは、1より大きい自然数のうち、１とその数でしか割り切れないものとする。
また、1は素数に含まれない。

表示として、配列にすべてを格納し一度に表示することとする。


- Javascriptの場合
var flag,i,j,x=0;
var list=[];

for (i=2; i<=500; ++i) {
     flag = 0;
     for (j=2; j<i; ++j) {
         if (i % j == 0) {
             flag = 1;
             break;
         }
     }
     if (flag == 0) {
        list[x] = i;
        x++;
     }
}
alert(list);

## 
- ブロックが自動で複数変数を宣言するときに、,で区切っていないことでエラーが発生していた
→indent()という関数によって、コードのインデントをいじっていたが、その際のreplace()などにより，が消えていた
sengen()という関数を新たに作成することで初期で変数宣言が行われる際に自動でコンマをつけるようにした

- forループを作成した際に、絶対に＜＝の形で作成されるようになっていた
＜の形で生成できるブロックを新しく作成した
それにともない、呼び出すforブロックがcontrols_forから
- controls_for1
- controls_for2
の2つになったため、注意が必要

- 問題を用意したい
-> 素数を表示するプログラムを問題として説いてもらうように設定する(test.txt)
-> そのためにforがうまく動作しなかった為、上記のブロックを作成した
まだ問題文や整合性評価のための条件を設けていないため、用意する

- 構文上正しい場合にgood, 正しくない場合にbadを表示する関数を作成
現在はエラーを吐いた場合にbadになるようになっているが、エラーを吐き出さない場合にコードが動かなくてもgoodが表示されてしまうため、調整が必要

## 11/22
1. [x] div内の文字列が範囲外まで出ていたためcssを設定し、スクロールで表示されるようにした
- overflow: auto; (autoの場合基本scrollが設定される)
2. [x] xml.htmlにて作成されるxmlファイルに改行を設定、少しだけ見やすくなったかもしれない
3. [x] xml.htmlにて保存されていたファイルを読み込む機能を追加
- 途中まで作成していたものを再び作成しなおせるように
4. [x] xml.htmlのスタートブロックを削除した、いらない気がした。
5. [x] 穴あき問題になるワードを少し増やした、思い立ったら増やす。まだべたで書いてる。
6. [x] 現在マッチしたワードをすべて穴あきにしているが、それを変更する
- 数字を決めて、それの個数分をランダムで生成
7. [x] モードセレクト作成
- モードセレクトのような形になるのが理想
- easy,normal,hardモードでの問題生成を作成、初期設定はeasyであり、各問題数は3,6,9
8. [x] 問題文をtxtファイルのいれる、
- [x] 何かしらの区切り文字で区切る,  '@@'
- [x] どこかしらに表示する test.htmlは右上に配置　他は現在未設置
9. divにスクロールを設定したらブロックのカテゴリ選択にスクロールバーがついた邪魔ですね

## 
test.htmlにてブロックプログラム制作の途中のxmlを保存、続きから作れるようにする
実行結果を表示させるためのエリアを作成する（Alertではなくそちらに表示させた方がいい？）

## 問題評価のためのテンプレートと比較方法について
なにかしら結果を表示させることは規定とする、txtファイルにて(string[2])の箇所に内容を設定する
```
@@表示させる内容
```
の形で用意し、それと比べさせる。

1. 実行結果を表示するエリアを作成し、その文章と回答を比較する？
- print(windows.alert)を実行結果エリアにも書き込まれるようにblocklyをいじる
-> alertじゃなくてtextareaの内容に直接追記するように変更？
=>document.getElementById('kaitou').textContent += i + " ";
表示がなんとなく気に食わないけど動作自体はいい？
Javascriptの書き方を練習できる環境としてならよい？

Blockly.JavaScript.text_print=function(a){
  return "window.alert(" + (Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''") + ");\nvar kaitou = document.getElementById('kaitou').textContent;\nkaitou += " + (Blockly.JavaScript.valueToCode(a,"TEXT",Blockly.JavaScript.ORDER_NONE)||"''") + ";\n kaitou += ' ';\ndocument.getElementById('kaitou').textContent = kaitou;\n" 
};


Blockly.JavaScript['text_print'] = function(block) {
  // Print statement.
  var msg = Blockly.JavaScript.valueToCode(block, 'TEXT',
      Blockly.JavaScript.ORDER_NONE) || '\'\'';
  return 'document.getElementById('kaitou').textContent = " + msg + ";\n';
};

2. 実行結果と問題の評価基準となる文章とを自動で比較する関数を作成する？
- 実行結果をなにかしらの変数に自動で入力されるように？
- 例えばalert, console.logなどの文字列をみて、その前後に自動で評価用の変数に自動で保存するように実行する際につけたす？

## ~11/28

1. 実行結果を表示するエリアを作成し、その文章と回答を比較する？
- print(windows.alert)を実行結果エリアにも書き込まれるようにblocklyをいじる
-> alertじゃなくてtextareaの内容に直接追記するように変更？
=>document.getElementById('kaitou').textContent += i + " ";
表示がなんとなく気に食わないけど動作自体はいい？
Javascriptの書き方を練習できる環境としてならよい？

2. check(),check2()あたりの関数の動きをもう少し正しくする

3. 論文にかく

コードを実行した結果、事前に用意した正答の結果とは異なるが、エラーが発生しないまま終了した場合などにどのような間違いだったのかを評価する。
- [x] コードを実行した結果が正答と異なった場合に、選択肢のどの問題が間違ったのかを表示する
- [?] 上記の場合に、実行結果のどこが結果と異なるのかを表示する

for
 (j = 2; j_inc >= 0 ? j ```<``` i : j ```<``` i; j += j_inc) {
このような場合にコードとしてはおかしいが実行結果は正しく正解となる場合がある
おかしい箇所としては、この書き方の場合j_incの数値が0以上だった場合に:の左側、未満だった場合に右側の条件に従って実行されるが、例題は整数しか扱わない、０未満になることはないのでそちらの条件分岐を用いることがなく、結果として実行結果は正しく、構文上エラーも発生しないが問題としては誤りとなる。
理由として、この条件のまま同じようにコードを書くと無限ループに陥る原因となるコードであるから。
これをどうにか誤りの理由として表示できるようにしたい
穴あき問題を自動で生成している都合上難しい？
ー＞ここが問題として出題されるかもランダムである
ー＞ここが問題として出題されたことを認識する必要がある

###
無限ループ回避のためのコードに問題なく実行できる内容のコードでもひっかかる
ループ回数が規定数（window.LoopTrapに指定した数字）
問題を制作する場合などにループ回数について限界を決めておく必要がある
仮に10000回とした（100までの素数を表示する場合に必要な数は4851）

check2()：実行結果から正誤を表示
numq()：複数実行結果がある場合に、どの箇所が間違いかを表示、回答数の多い少ないを表示,
match()：穴あき問題の問題番号が上から順になるように変更,
answer2()：どの問題が正解したのかを表示するように変更,
その他エラーを吐く関数をアラートから実行結果の場所に表示に変更

##
文字列を表示したい場合などに入力された文字列の空白やコンマなどが消去される
何かの関数が邪魔してると思うから修正が必要

関連研究を調べる
関連したシステム、サイトなどを調べる

##
[x] コンマ問題について
indent(string)を変更し、コンマ問題を解決した。
sengen(string)が結果として不要になった。

問題を作成
[x] テキストの表示
- test1.txt 
[x] 条件分岐を含むテキストの表示
- test2.txt
[x] ループを含む
- test3.txt
[x] 条件分岐、ループを含む
- test4.txt

[x] アンケートなど評価について
https://docs.google.com/forms/d/1WGStAj6WJHIHjQpS8wCH71bcR7sR1dv-Trxd0u7zO3o
- テキストを表示するprintブロックからdocument.getElementById().textContentを表示するようにしているが、実際にjavascriptを書くときにはalertやconsole.logを書くことが多いと感じる。
アンケートとしてどっちで表示すると嬉しいか選んでもらう？
- 問題文から問題の意図が理解できるかどうか
- 名称などはわかりやすいかどうか
- 配置などはわかりやすいかどうか

[x] test.html のtestタブについて、コンマが消える問題が残っていたため修正する
[x] 問題2 条件分岐を含むテキストの表示について回答が正しく出ていない

[x] 問題2 条件分岐の問題を考えなおしたほうがいい
現在の問題文：
条件分岐が正しい場合に”A”と表示、誤っている場合には”B”と表示される
問題点：
- 一回の実行では解答の比較ができないため複数実行しての結果をみないといけない（未実装）
- 現在のシステムでは条件分岐が正しい（True）のかを判断できない
->実行結果のどちらかと一致したかどうかを判定するようにした
->実行結果のみを見ているため、実は条件分岐を書かずにprintだけしても正解になる


##
1. 現在実行結果だけをみて正誤を判断しているため、
条件分岐や繰り返し命令などを実際に行っているかは無視している
できるのかは分からないが、実行の際に変数の値やループの回数などをみる？
2. テキストを表示する問題１の場合において、現在だと穴埋めなどにする箇所がない
printやalert、console.logなどの関数名を表示していたほうがいい

##
"alert"で表示し、indexOfなどで"alert"を発見したら、それをreplaceする？


## 1208
###
```
論文をかく とくに３
```

###
問題の規定の正解以外でも、実行結果から問題の解答として正しい選択肢、あるいは問題の解答としては正しくないが，コードとしては実行できる状態となる選択肢など
問題の規定の正解となる選択肢以外で
- 実行結果をみると問題の解答と比較して正しい選択肢、
- 実行結果は問題の解答と比較して正しくないが，コードとしては実行できる状態となる選択肢（素数を表示する問題で偶数が表示されるなど条件式で間違いとなる選択肢など）
上記のような状態を評価する

以前まではこの状態の評価を整合性と表現していたが、正しく表現できていない
本研究では生成される選択問題は1単語を問題として生成するため、整合性のチェックが必要になる場合はほぼない
->不正解の選択肢だが正解と同じ結果となるような場合は少ない(等号 >,>= などの条件式が変化する際など)
より正確な表現に変更したい
- コードの整合性の評価
- 問題との整合性の評価
- [o] 構文上の正しさの評価

## 採点基準と表示
選択問題を自動で生成するアルゴリズムが現在正解を一つしか選択できないため、どちらでも正解の場合や複数問題を同時に変更すれば正解と同じ動作になる場合にもそれを間違いだと判定する
リストを変更、数字などをいれておいて、数字をみて判定する？
間違った箇所の問題にあわせた間違い原因を表示する
1. リストを深くして、数字を判断 することで採点と評価のために利用する？ 採点の時にこの数字にアクセスできる？
 [
     [1], [ [if], [else] ],
     [2], [ [], [] ]
 ]　
2. 上記では不等号かどうかを判断したい
var hensuu = "<=",">="みたいなものと解答を比較して合致したものを基準にしたほうがよい？
3. selectboxにoptionを追加しておき、それを頼りにする？
- 第１問などの表示をつくる、valueに予約語なのか式なのかを判別できるように設定



[o] 正しい回答の場合は正解だと表示する
[ ] 一つ目は，事前に用意した結果と，選ばれた解答から作成される実行結果との比較によって```結果が等しい場合```且つ既定の正答となる選択肢が選ばれていない場合には，条件式の等号の有無の違いによるもの，もしくは２か所以上の条件式が同時に誤った結果だと考えられる．解答として誤りだとしたいずれかの理由を表示することで評価する．
- 誤答数が１の場合
1. 間違いと判断された問題では「不等号が誤りだと認識された可能性」
2. ユーザによって選ばれた回答と回答例を表示
3. ＝の有無による変化を説明

- 誤答数が２以上の場合
1. 誤った問題が等号不等号を選ぶ問題なのか判断
2. 「等号の位置が複数箇所同時に逆だった場合に結果が正しくなる場合」だと判断、説明

[ ] 二つ目は，```事前に用意した正答の結果と異なる```場合で，エラーが発生しない状態で結果の表示を行えた場合は，予約語の間違いと条件式の間違いが想定される．正答との比較から，どういった点が間違っているのかを表示することで評価する．

1. 間違えた箇所が予約語か条件式かを判断
2. 予約語だった場合は、選んだ予約語の使い方を表示する
3. 等号不等号だった場合は、その式を選んだ場合の数字の範囲を説明


[o] 三つ目は，予約語の間違いか条件式の間違いによる無限ループなどが考えられる．エラー内容を表示する．
- 現在エラー内容を表示

## 12/08
作問
穴埋めを作ることをベース
自動で生成する際の矛盾点
整合性などエラー
Blocklyと連携しての改善点

不整合の場合を定義
コードの比較
結果の比較

## 12/13
tiny soter

tanosii?
kadai,teian nodouki
juunan

sankaku,batus


## 12/13　誤った問題の原因を説明する
1. 選ばれている選択肢の内容にあてはまる説明をする
1.  不等号の違いによって範囲の違いがある
a">="bの場合、bの値を含むnより大きい値をaがとっている場合
a">"b の場合、bの値を含まないbより大きい値をaがとっている場合
2. 等号の違いの説明
a"=="bの場合、aの値とbの値は等しい
a"!="bの場合、aの値とbの値は異なる
3. 予約語
"予約語"の説明 
標準的な書き方
for とは条件によるループを作成する予約語だよ！
for(i = 1; i_inc >= 0 ? i < 10 : i > 10; i += i_inc){
}
for(i=0;i<10;i++){
}
while とは条件によるループを作成する予約語だよ！\nwhile(i != 1){\n}
do　とは条件によるループを作成する予約語だよ！\ndo{\n}while(i != 1);\n";
if とは条件によって実行するかをきめる予約語だよ！\nif(a == b){}\n";

else とはifで条件に当てはまらない場合の分岐を増やすために利用するよ！\nif(a == b){\n}else if(a == c){\n}else{}\n";
switch とは条件分岐をきめるための予約語だよ！\nswitch(i){\n    case 1:\n        処理1;\n        break;\n    case 2:\n        処理2;\n        break;\n    default: \n        処理3;\n}\n";
break とはループを途中で抜けるための予約語だよ！\nbreak;\n";
continue とはループの処理を一度スキップするための予約語だよ！\ncontinue;\n";
# thema
title 3 thema
- ブロックプログラミングを用いた論理的思考とコーディングを身に着けるための学習環境
- 選択問題の自動生成時における柔軟な採点を行うための設計と開発
- 論理的思考を身に着けるための選択問題の自動生成時における柔軟な採点を行う学習環境の設計と開発




## 12/15
プログラミング初級者を対象として，論理的思考を鍛えるためにブロックプログラミングの導入などがされる．一方，実際に運用されるシステム開発などでは，プログラミング言語を用いたコーディングが必要とされる．プログラミングの初級教育から中高等教育にかけて，論理的思考力からコーディング力の養成に円滑に移行できるような教育支援も考えていく必要がある．

ブロックプログラミングからコーディング用の練習問題を自動生成することに着目し，本研究ではブロックプログラミングと連携したソースコードの穴埋め問題生成システムを構築する．


1. レベル分けを実装
初級者レベル：同じカテゴリーでの選択肢
中級者レベル：別カテゴリーでの選択肢(予約語、四則演算子、不等号がランダムで選択問題に入力されていることがもしかしたら問題になるかもしれない？)
のレベル分けを実装した
合計３段階
初級者レベルで問題数３
初級者レベルで問題数６
中級者レベルで問題数３

中級者レベルの選択肢の順番をランダムになるようにした



2. プログラミング初級者を対象とした場合に、日本語でのブロックの方が学習に入りやすいと考え、メッセージなどを日本語に変更した
if -> もし　
else -> そうでなければ
のようになっている

3. 2と同様にLogicやLoopsなどの名称やtrueなど英語だと分かりにくいと判断し、ブロックプログラム上のメッセージを日本語に変更
Logic -> 演算
Loops　-> 繰り返し
math -> 数字
Text -> 文字
Lists -> 配列
Variables -> 変数
Functions -> 関数

if
 値が true の場合 -> 条件が正しい場合

4. 変数名を読み取って問題に利用したい ただし、変数宣言をしている箇所は問題になってほしくない
展望行き？

5. javascript だと 文字列のアウトプットが問題に出しづらい
pythonではprint("Hello,World")
cではprintf("Hello,World"), printf("%s",str)
のようなきまった書き方とは別の方法をjavascriptだと利用する場合があるため、問題として生成できない

6. 選択問題に選ばれる予約語（キーワード群およびそのカテゴリー群）が少ない
本システムで利用できるよう設定されている、ブロックに対応した予約語をキーワードとして追加
まだ予約語の説明は全て用意していないため、順次用意する。（list1の５番以降の内容）

const,let,varの説明と解答について：一度問題から消した
　BlocklyによるJavaScript変数宣言は全てvarで行われるため、問題に扱わない方がいい？
　本システムだとどのタイミングならconstでないといけないかの実装ができないため、ないほうがいい？
　const:再定義できない変数の宣言
　let：再定義が可能な変数の宣言、ただし同じ変数名を宣言できない
　var：再定義が可能な変数の宣言、同じ変数名を宣言できる

7. 実行結果の正しさを表示するタイミングを少し変更
既に実行結果が表示されている場合はそれと比較する
コードを実行した場合にも比較する

## 1216
問題を増やす
xml,問題分,実行結果,tag


[1,2,]素数.4
[1,]値の交換.5
[1,]三角の体積を求める.6
[1,]値の合計を計算.7
[1,]ソート.8
[]りんご一個３０円みかん一個５０円５個ずつ買ったらいくら.9
[]


配列について
Blocklyのlistの内容を読み込むコードの自動生成の方法が使いづらい
listのn番目を指定するために、
ブロック上では1と入力する -> list[0]を読み込む
ブロック上ではnと入力する -> list[n-1]を読み込む
困っている挙動
ループにおいてi番目の情報を読み取りたい場合に、list[i]と実行してほしい
しかし、生成されるコードではlist[i-1]として実行されてしまう

課題

提案
実験・評価
複数の問題（２０？）にたいして３モードの出題を見て、問題の意図・問題の難易度は正しそうかを評価

## 1217
printの実行毎に改行を加えるようにした
[o] 結果との比較、あるいは結果自体を変更する必要あり

## 12 20
- 問題文と解答などのタグをつける
タグ：num(解答が複数現れる),なし

- 問題を仮に５つ用意(4,5,6,7,8)
(問題文がまだ仮決定のため変更、xmlと実行結果などは完成)

実験について
- それぞれの問題に対してそれぞれの難易度で問題を生成し、その問題が学習者に対して適切に問題をだせているの評価する
適切と判断する基準
・正解となる解答が選択肢に入っている
・同一の選択問題内で選択肢が複数かぶっていない
・



1. 提案内容の概要図と、ブロックプログラミングとコード生成部のUI図を書いてください。選択穴埋め問題の例がわかるように、これも図で書いてください。提案システムを使った、学習方法（学習者視点）と問題作成方法（教師視点）も節を設けて書いておいてください。

2. 技術課題ですが、問題の難易度に応じて穴埋め問題を生成するために、穴埋め箇所を選択問題として出題することで変化に富んだ問題を生成できると考えられる。しかし、ソースコードの穴埋め選択問題を自動で生成する技術が今なお課題となっている（←調べないとだめ）、という流れで書いてみてください。提案内容は、穴埋め選択問題の生成方法を中心に、簡潔に「本研究では、～を提案する（設計・開発する）」に相当する文章を入れてください。提案システムを使った、学習方法（学習者視点）と問題作成方法（教師視点）についても、1章のおさまりのより箇所に書いておいてください。実験について、実験環境としてどのようなプロトタイプを構築し、またどのように評価するかなども書いてみてください。

## 1221
- [o]提案内容の概要図
- []ブロックプログラミングとコード生成部のUI図
- []選択穴埋め問題の例がわかる図

## 12/22 ２章：関連研究を充実させる
高木
多肢選択式項目の出題パターンと選択肢の類似性に着目した難易度推定方法の提案と評価
過去問題を情報源として自動生成された問題を利用する作問支援システムの開発と評価

船曳
Javaプログラミングの予約語学習のためのオンライン穴埋め問題機能の実装
Javaプログラミング学習支援システムの穴埋め問題機能の拡張と授業への適用
Javaプログラミング学習支援システムの穴埋め問題機能の拡張とその評価
Javaプログラミング学習支援システムの解答状況可視化および問題推薦機能の実装
Javaプログラミング学習支援システムのための空欄補充問題生成アルゴリズムの拡張
Javaプログラミング学習支援システムにおける空欄補充問題の難易度推定法


# 使いそうなプログラム群をおいておく場所
あるいはこれからやりたいことのメモも書きます

- テンプレートリテラル書き方 memo
```
 `<div id="sele${l}">a</div>`
```

- workspaceの内容が更新された際の行動について
workspace.addChangeLisner(function(){
    関数内容
});

- Javascriptの時に発見Don'tなどのシングルクォーテーションなどの直前にエスケープ文字が代入されている
いつか外すようにする
- DBに正解を保存しておき、正誤判別をする？
- 問題の選択肢についてどうするかを決めなきゃいけない
    - 完全に決まった選択肢が現れるようにする
    - 関連した選択肢が自動で選ばれるようにする
    - エラーが出る/出ない範囲で自動で選ばれるようにする
    - 上記のいずれにせよ、正誤判断以前に実行できると嬉しい
- スマホ対応したい
- 仮に生成している問題文（test.txt）の内容はxmlで書かれているので、これを直書きパターンも考えたい
    - 問題点
        - xmlに対応させている理由はBlocklyによるコードの変換はxml→高級言語のみ（自分が把握している方法）
        - つまり、複数の言語に対応するためには、複数言語の数用意しなければならない
        - コードからxmlに変換することが現在できない




kirikae.html
- タブ切り替えをする
index.html
- リアルタイム切り替え、あるいはボタンクリックによる切り替え
selectbox.html
- セレクトボックスを生成
test.html
- セレクトの結果から合否判定
tikan.html  
- 文字列の置換をする（現在は; に反応し、その後ろに改行コードを入力）
image.html
- ファイルから画像を選択して表示







# ituka
toolboxを別ファイルで用意して読み込ませたい
→もっとindex.htmlの見た目をきれいにしたい

## 1
選択された結果からできたコードを実行できると理解がしやすい
エラーが発生するようなコードが選択肢に入ってほしい, 
またはほしくない場合もある

## リスクについて
evalにてコードを実行する以上悪意をもっていじると結構怖い

### 
作成されたコードから実行したい
一度Divなどにコードとして表示されているものを実行できると面白い
- textareaに保存したコードの実行はできそう?
    - eval(code)の形式でcode の内容にtextareaのvalueを読み込み実行すれば、ブラウザ上で実行できる？
    - （）一度BlocklyにおけるworkspaceToCOdeという関数を通したコードじゃないと実行できない？
        - コードがあってればそれは問題ない、あくまでブロックからコードに変換する関数
- evalという関数がJavascriptを実行する関数のため、他の言語の状態では実行できない
    - 他の言語を生成後、Javacriptに変換する方法を考える必要がある
    -
- evalよりJS-Interpreterによる実行が公式に推奨されている 

###
- partsにて生成したセレクトボックスの生成を実装できるように、TextBoxを一つDivなどに変換したい
- ボタンを押すと問題文の表示する場所、ブロックから生成したコードを表示する場所などが切り替えられると、Div一つでいいかもしれない
- 変更するなら保存する場所をつくらないといけない
ーーーー
タブ切り替えが可能になった


# url memo
Blockly for c
https://qiita.com/heyhachi/items/1b5c7e9b453c1246aa50

css
https://willcloud.jp/knowhow/whats_css/

selectboxの動的な値の生成
https://techacademy.jp/magazine/27133

動的なselectboxの生成？
https://pisuke-code.com/jquery-initialize-select-options/

selectboxの動的な生成
https://tsuchippo.com/programming-js-selectbox

appendchild
https://techacademy.jp/magazine/20820

blockly-toolbox, workspace
https://www.catch.jp/wiki/index.php?Blockly%2FToolbox_WorkSpace

div
https://www.ipentec.com/document/css-child-selector

iframe
https://gray-code.com/html_css/view-another-html-on-current-html/

#
Blocklyを用いた多言語プログラミング学習支援環境の構築
https://www.jsise.org/society/committee/2018/4th/TR-033-04-1B-002.pdf

demo
http://guppy.eng.kagawa-u.ac.jp/~kagawa/Members/Sano/
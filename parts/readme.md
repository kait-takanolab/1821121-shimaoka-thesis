# 10/04
nodeのスライドはインストール方法など

評価基準を制定する
卒論にかける構成にする

問題をDBから読みとる
穴埋め問題を管理または自動生成

課題を明確にしたい


# 10/07
- タブスイッチのidを変更した（Taba,b,c　→　Question_area, output, test)
- 以前まで利用していたtextareaを破棄し、タブ切替できるDivを利用（コメントアウトしているだけ）
- iframeのテストをした、他のhtmlファイルの内容をそのまま流用できる（programm/index2.htmlのタブの中のtest参照）
- 一部Javascriptの中で、必要な関数がtextareaからDivに変更されたことでかわった。
    - value, innerHTML などを利用していた箇所が innerText に変更される箇所がある
    - まだすべてを置換していない
- Javascriptのコードを生成した際にエスケープ文字が代入されている問題を解決した
    - エスケープ文字自体は生成されてしまうので、コード生成後に置換することにした
    - もしかしたらもっと置換しなければいけないかもしれないため、要検証
- ブロックを触ると自動でoutputのコードが切り替わるようにした、現在はJavascript
- 現時点でのGUIについて
    - 画面左側にBlocklyを直接触るための箇所
    - 画面右側に問題文、Blockからの結果、テスト
    - 基本的には問題文と結果を切り替える？
- 実はスタートブロックとして用意してたif文などをワークスペースの選択肢として用意をしわすれてたことに気づいた
- 早めに用意する


# 10/10
- Logic項目を用意し、Ifの利用が可能になった。
- If-elseはIfブロックを設置後、IFブロック内の歯車マークから選択ができる

- タブのQuestion, outputなどの範囲指定が雑に四角を作成しているだけのため、コードが伸びると枠からずれる

- Questionとtestが同時に選択、変更されるように変更した
    - 現在はローカル環境のファイルを選択してもらう形式→選択肢から選んでもらう形式に
    - 現時点で問題文となるxmlの書かれているtextファイルと生後判断のテストが用意されているhtmlファイルを同時に選べるようにしたい
    - ファイルの位置を同じフォルダに用意？
    - htmlファイルはiframeにて読み込めるが、textファイルの読み込みがなんでかうまくいかない
        試行：window.open, close
    - 複数記事を読んだ感じ、基本的にローカルに存在するHTMLファイルの動作によりファイルを読み込むことはセキュリティ面もあり制約が多い
    - file自体はローカルから読み取り、その内容からHTMLファイルは別でiframeの方式にすればいい？
        - questionjsに追記する形でiframe?
    - input からローカルファイルを選択し、Questionの欄にtest.txt, testの欄にtest.htmlを読み取ることができるようになった
    これによって、問題文となるtxtファイルとhtmlファイルの名前を統一して保存すれば、同時に切り替えられるようになった

- 問題を複数用意する

# 10/11　semi
- 論理的思考を身に着けるということであれば正誤だけでなく解説があるといいかなと思います。
- 似た関数をリスト
    - If else  while
    - Word2vecで似たような言葉
    - 似たような数字
- ある程度決め打ちでもいい
- forが正答だから似たようなもの

# 10/12
- 決められたワードから自動で選択肢を生成したい
- 配列を複数用意して、ワードがマッチした場合に配列を読み取ろうと思う
    - {(for,while,do),(if,else,which),(print,alert)}

- 問題文から単語を切り取って、マッチしたら問題として生成？
- x = x.split(/(\s|\(|\)|\;|\n)/);
- の様に正規表現を用いると、スペース,（,）,;,改行で文章を区切ることができる
- （）を正規表現を囲むように置くことで区切った文章も配列にいれることができる

- x.split()の様に内容を含まないと、一つの文字列として表現できる
    - はずだが、Uncaught TypeError: x.split is not　a functionと表示される場合があった
    - エラーが表示される箇所の変数を明示的にStringだと指定すると動作する -> String(x)
    - 一つの文字列にはなったが、区切り文字だった”,”が残ったままになる
- x.join(,) などは？
    - おなじく一つの文字列にはなるが、”,”も残る
- replase とかで消してみる？
    - x = (String(x)).replace(/,/g, '');
    - このようにすると”,”は消せた
- そもそも前提とする文章に”,"が存在する場合のことは現在一切考慮していない・・・
- 元の文章を保存しておいて、どうにかできる？ わからない

- そもそもこの方法だと問題となる選択肢が増えると値が膨大になるかも
- forループを現時点で３回回すことが確定している

# 10/16 - 17
## 10/12日の文字列について
- split前の文章を保存しておくには、普通に変数をわければいい

- 文章内に選択肢をいれるならやっぱりわけたりもどした物を使いたい？
- 文字列から配列にしているが、そこにどうやってセレクトボックスをいれるのかわからない


## dynamicname.htmlを作成
- 動的に変数を設定する際のメモであり、auto matchにてセレクトボックスなどを複数用意したいと思った
- 内容としては、連想配列を用いている

## auto match　
- 連想配列からforEachを用いるとエラーが発生した
- 関係あるかはわからない
    - Javascriptの連想配列は順序を持っていない？
    - 今回は関係なかった
- 連想配列にいれる時のキーとなる数字が間違っていただけだったため今後注意する

- 複数のマッチしたワードから連想配列として配列を持つことはできた
- ここからやりたいこと
    - 複数のセレクトボックスの設定
        - セレクトボックスを複数配置すること自体はループするだけでもできる
        - セレクトボックスの名称を設定したい どこをいじるか
    - セレクトボックスの位置をキーワードがマッチした場所に設定
        - マッチした場所をdivに書き換える
        - 元のワードも保存しておく
    - appendの実行順序を意識しないとうごかない

- テキストボックスを作成することはできた
    - テキストボックスの個数を調べる
    - テキストボックスの選択された値を調べる
    - 正誤判定
- 全部できたらメインのプログラムに組み込むことを考える
    - 現時点ではhtml本文から問題を生成した
    - Blocklyから生成された文章を読み取って、そこから実行したい
    - questionjsを変更する
        - questionjs2, answer2　test.jsに作成

- JSの実行を３通りできるようにする（Question, output, test)
- 表示のためにエスケープ文字を消していたために、実行時にエラーを吐く
- エスケープ文字が表示される状態にもどした
- Question, outputに関しては実行できる
- testはできていない
    - br などHTML表示するためにつけているものも変えなきゃだめかもしれない
    - testに関して、セレクトボックスの情報をどうにか選択されている文字にしたい
    - どの部分がセレクトボックスなのかを判別して文章から配列に区切ることは可能
        - ただし、配列の何番目がセレクトボックスなのか判別できない
    - セレクトボックスの選択されているテキストを読み込むことはできる
    - どのセレクトボックスを読んでいて、配列の何番目に挿入するのかを調べたい
    - sele[n]の番号順が、単語のヒット順ではあるが、正確にはマッチパターンのstr[i][j]にヒットしたものから順にnが決定するのが問題
    - sortなどためしたできた

- 文字のインデントもいつかなおしたい


# 使いそうなプログラム群をおいておく場所
あるいはこれからやりたいことのメモも書きます

- テンプレートリテラル書き方 memo
 `<div id="sele${l}">a</div>`


- workspaceの内容が更新された際の行動について
workspace.addChangeLisner(function(){
    関数内容
});

- Javascriptの時に発見Don'tなどのシングルクォーテーションなどの直前にエスケープ文字が代入されている
いつか外すようにする
- DBに正解を保存しておき、正誤判別をする？
- 問題の選択肢についてどうするかを決めなきゃいけない
    - 完全に決まった選択肢が現れるようにする
    - 関連した選択肢が自動で選ばれるようにする
    - エラーが出る/出ない範囲で自動で選ばれるようにする
    - 上記のいずれにせよ、正誤判断以前に実行できると嬉しい
- スマホ対応したい
- 仮に生成している問題文（test.txt）の内容はxmlで書かれているので、これを直書きパターンも考えたい
    - 問題点
        - xmlに対応させている理由はBlocklyによるコードの変換はxml→高級言語のみ（自分が把握している方法）
        - つまり、複数の言語に対応するためには、複数言語の数用意しなければならない
        - コードからxmlに変換することが現在できない




kirikae.html
- タブ切り替えをする
index.html
- リアルタイム切り替え、あるいはボタンクリックによる切り替え
selectbox.html
- セレクトボックスを生成
test.html
- セレクトの結果から合否判定
tikan.html  
- 文字列の置換をする（現在は; に反応し、その後ろに改行コードを入力）
image.html
- ファイルから画像を選択して表示







## ituka
toolboxを別ファイルで用意して読み込ませたい
→もっとindex.htmlの見た目をきれいにしたい

## 1
選択された結果からできたコードを実行できると理解がしやすい
エラーが発生するようなコードが選択肢に入ってほしい, 
またはほしくない場合もある

## リスクについて
evalにてコードを実行する以上悪意をもっていじると結構怖い

### 
作成されたコードから実行したい
一度Divなどにコードとして表示されているものを実行できると面白い
- textareaに保存したコードの実行はできそう?
    - eval(code)の形式でcode の内容にtextareaのvalueを読み込み実行すれば、ブラウザ上で実行できる？
    - （）一度BlocklyにおけるworkspaceToCOdeという関数を通したコードじゃないと実行できない？
        - コードがあってればそれは問題ない、あくまでブロックからコードに変換する関数
- evalという関数がJavascriptを実行する関数のため、他の言語の状態では実行できない
    - 他の言語を生成後、Javacriptに変換する方法を考える必要がある
    -
- evalよりJS-Interpreterによる実行が公式に推奨されている 

###
- partsにて生成したセレクトボックスの生成を実装できるように、TextBoxを一つDivなどに変換したい
- ボタンを押すと問題文の表示する場所、ブロックから生成したコードを表示する場所などが切り替えられると、Div一つでいいかもしれない
- 変更するなら保存する場所をつくらないといけない
ーーーー
タブ切り替えが可能になった


# url memo
Blockly for c
https://qiita.com/heyhachi/items/1b5c7e9b453c1246aa50

css
https://willcloud.jp/knowhow/whats_css/

selectboxの動的な値の生成
https://techacademy.jp/magazine/27133

動的なselectboxの生成？
https://pisuke-code.com/jquery-initialize-select-options/

selectboxの動的な生成
https://tsuchippo.com/programming-js-selectbox

appendchild
https://techacademy.jp/magazine/20820

blockly-toolbox, workspace
https://www.catch.jp/wiki/index.php?Blockly%2FToolbox_WorkSpace

div
https://www.ipentec.com/document/css-child-selector

iframe
https://gray-code.com/html_css/view-another-html-on-current-html/

#
Blocklyを用いた多言語プログラミング学習支援環境の構築
https://www.jsise.org/society/committee/2018/4th/TR-033-04-1B-002.pdf

demo
http://guppy.eng.kagawa-u.ac.jp/~kagawa/Members/Sano/